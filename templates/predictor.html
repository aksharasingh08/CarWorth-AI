<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CarWorth AI - Price Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <div class="background-overlay"></div>
        
        <div class="content">
            <!-- Header -->
            <div class="header">
                <h1 class="brand-name">CarWorth AI</h1>
                <p class="tagline">Car Price Predictor</p>
                <div class="divider"></div>
            </div>

            <!-- Prediction Form -->
            <div class="form-container">
                <h2 class="form-title">Enter Your Car Details</h2>
                
                <form action="/predict" method="POST" id="predictionForm" class="prediction-form">
                    <!-- Company -->
                    <div class="form-group">
                        <label for="company">Company</label>
                        <select id="company" name="company" required>
                            {% for company in companies %}
                            <option value="{{ company }}">{{ company }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Car Model -->
                    <div class="form-group">
                        <label for="car_models">Car Model</label>
                        <select id="car_models" name="car_models" required>
                            <option value="">Select Car Model</option>
                            {% for model in car_models %}
                            <option value="{{ model }}">{{ model }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Year and Fuel Type Row -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="year">Year</label>
                            <select id="year" name="year" required>
                                <option value="">Select Year</option>
                                {% for yr in years %}
                                <option value="{{ yr }}">{{ yr }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="fuel_type">Fuel Type</label>
                            <select id="fuel_type" name="fuel_type" required>
                                <option value="">Select Fuel Type</option>
                                {% for fuel in fuel_types %}
                                <option value="{{ fuel }}">{{ fuel }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <!-- Kilometers Driven -->
                    <div class="form-group">
                        <label for="kilo_driven">Kilometers Driven</label>
                        <input type="number" id="kilo_driven" name="kilo_driven" placeholder="Enter kilometers driven" required>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn-primary">Get Price Prediction</button>
                </form>

                <!-- Result Display -->
                <div id="result" class="result-container" style="display: none;">
                    <h3>Estimated Price</h3>
                    <div class="price-display">
                        <span class="currency">₹</span>
                        <span id="predicted-price">0</span>
                    </div>
                    <p class="result-note">* This is an estimated price based on market analysis</p>
                    <button onclick="location.reload()" class="btn-secondary">Predict Another Car</button>
                </div>

                <!-- Back Link -->
                <div class="back-link">
                    <a href="/">← Back to Home</a>
                </div>
            </div>

            <!-- Footer -->
            <div class="footer">
                <p>Powered by advanced machine learning algorithms</p>
            </div>
        </div>
    </div>

    <script>
        // Handle form submission
        document.getElementById('predictionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            
            fetch('/predict', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(data => {
                // Format the price with commas
                const price = parseFloat(data);
                const formattedPrice = price.toLocaleString('en-IN', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                });
                
                document.getElementById('predicted-price').textContent = formattedPrice;
                document.getElementById('predictionForm').style.display = 'none';
                document.getElementById('result').style.display = 'block';
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred while predicting the price. Please try again.');
            });
        });
    </script>
</body>
</html>
